<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pad test</title>
	<link rel="stylesheet" href="/public/css/styles.css" class="style">

	<style>
.main {
	
	min-height: 500px;
	/* background-color: red; */
}

#content {
	background-color: yellow;
	min-height: 500px;
	width: 100%;
}
</style>
</head>

<body>
	<div class="main">
		<h1>Pad test</h1>
		<div id="content">
			<p style="text-align:center">Loading Canvas...</p>
		</div>
		<div id="output"></div>
	</div>	

	<script src="/public/js/vendor/jquery-2.1.1.min.js"></script>
	<script src="/public/js/speak.js"></script>
	<script src="/public/js/pointerevents.js"></script>
	<script src="/public/js/pad.js"></script>

	<script>
$(document).ready(function () {   
	var gestures = new Array();

	// Add new gestures here
	// gestures["RETURNDATA"] = "MOUSESEQUENCE";

	gestures["A"] = "53";
	gestures["B"] = "260123401234";
	gestures["C"] = "43210";
	gestures["D"] = "26701234";
	gestures["E"] = "4321043210";
	gestures["F"] = "42";
	gestures["G"] = "432107650";
	gestures["H"] = "267012";
	gestures["I"] = "6";
	gestures["J"] = "234";
	gestures["K"] = "3456701";
	gestures["L"] = "46";
	gestures["M"] = "6172";
	gestures["N"] = "616";
	gestures["O"] = "432107654";
	gestures["P"] = "670123456";
	gestures["Q"] = "4321076540";
	gestures["R"] = "267012341";
	gestures["S"] = "432101234";
	gestures["T"] = "02";
	gestures["U"] = "21076";
	gestures["V"] = "35";
	gestures["W"] = "2716";
	gestures["X"] = "1076543";
	gestures["Y"] = "21076234567";
	gestures["Z"] = "030";
	gestures[" "] = "0";
	gestures["?"] = "6701232";

	// .main
	$('body').pad(gestures, function (data) {
		// document.getElementById('outputbox').innerHTML += data;
		// document.getElementById('outputbox').innerHTML = data;
		if (data !== "") {
			$("h1").html(data);
			console.log(data);
			speakEnglish(data);
		}
			
	});
});
	</script>

		<script type="text/javascript">
	
var ctx, color = "#000";	


$(document).ready(function () {
	
	// setup a new canvas for drawing wait for device init
    setTimeout(function(){
	   newCanvas();
    }, 1000);
		
	// reset palette selection (css) and select the clicked color for canvas strokeStyle
	$(".palette").click(function(){
		$(".palette").css("border-color", "#777");
		$(".palette").css("border-style", "solid");
		$(this).css("border-color", "#fff");
		$(this).css("border-style", "dashed");
		color = $(this).css("background-color");
		ctx.beginPath();
		ctx.strokeStyle = color;
	});
    
	// link the new button with newCanvas() function
	$("#new").click(function() {
		newCanvas();
	});
});

// function to setup a new canvas for drawing
function newCanvas(){
	//define and resize canvas

	/*
    $("#content").height($(window).height()-90);
    canvas = '<canvas id="canvas" width="'+$(window).width()+'" height="'+($(window).height()-90)+'"></canvas>';
	$("#content").html(canvas);
	*/

	// $("#content").height($(window).height()-90);
    var canvas = '<canvas id="canvas" width="'+$("#content").width()+'" height="'+$("#content").height()+'"></canvas>';
	$("#content").html(canvas);
    
    // setup canvas
	ctx=document.getElementById("canvas").getContext("2d");
	ctx.strokeStyle = color;
	// ctx.lineWidth = 5;	
	ctx.lineWidth = 20;
	// setup to trigger drawing on mouse or touch
	$("#canvas").drawTouch();
    $("#canvas").drawPointer();
	$("#canvas").drawMouse();
}



// prototype to	start drawing on touch using canvas moveTo and lineTo
$.fn.drawTouch = function() {
	var clear = function(e) {
		canvas = $("#canvas");
		// $("h1").html("TOUCH END");
		console.log("TOUCH clear canvas: ", canvas.width(), canvas.height());
		ctx.clearRect(0, 0, canvas.width(), canvas.height());
	}

	var start = function(e) {
		clear(e);

        e = e.originalEvent;
		ctx.beginPath();
		x = e.changedTouches[0].pageX;
		y = e.changedTouches[0].pageY-44;
		ctx.moveTo(x,y);


	};
	var move = function(e) {
		e.preventDefault();
        e = e.originalEvent;
		x = e.changedTouches[0].pageX;
		y = e.changedTouches[0].pageY-44;
		ctx.lineTo(x,y);
		ctx.stroke();
	};

	
	$(this).on("touchstart", start);
	$(this).on("touchmove", move);
	// $(this).on("touchend", clear);	
}; 
    
// prototype to	start drawing on pointer(microsoft ie) using canvas moveTo and lineTo
$.fn.drawPointer = function() {
	var start = function(e) {
        e = e.originalEvent;
		ctx.beginPath();
		x = e.pageX;
		y = e.pageY-44;
		ctx.moveTo(x,y);
	};
	var move = function(e) {
		e.preventDefault();
        e = e.originalEvent;
		x = e.pageX;
		y = e.pageY-44;
		ctx.lineTo(x,y);
		ctx.stroke();
    };
	$(this).on("MSPointerDown", start);
	$(this).on("MSPointerMove", move);
};        

// prototype to	start drawing on mouse using canvas moveTo and lineTo
$.fn.drawMouse = function() {
	var clicked = 0;

	var clear = function(e) {
		canvas = $("#canvas");
		console.log("MOUSE clear canvas: ", canvas.width(), canvas.height());
		ctx.clearRect(0, 0, canvas.width(), canvas.height());
	}

	var start = function(e) {
		clear();

		clicked = 1;
		ctx.beginPath();
		x = e.pageX;
		y = e.pageY-44;
		ctx.moveTo(x,y);
	};
	var move = function(e) {
		if(clicked){
			x = e.pageX;
			y = e.pageY-44;
			ctx.lineTo(x,y);
			ctx.stroke();
		}
	};
	var stop = function(e) {
		clicked = 0;
		// clear canvas
		
	};
	$(this).on("mousedown", start);
	$(this).on("mousemove", move);
	$(window).on("mouseup", stop);
};

	</script>
</body>
</html>